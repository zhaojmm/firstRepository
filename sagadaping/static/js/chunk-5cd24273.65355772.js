(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5cd24273"],{"004a":function(a,t,e){"use strict";e("db85")},3259:function(a,t,e){a.exports=e.p+"static/img/verpm25.b1a39a8d.png"},"4c17":function(a,t,e){a.exports=e.p+"static/img/verwendu.ea7bae55.png"},"4f2b":function(a,t,e){"use strict";e("a5dc")},"55c3":function(a,t,e){a.exports=e.p+"static/img/verco2.00e0d3a4.png"},6650:function(a,t,e){a.exports=e.p+"static/img/circleEnergy.890e1249.png"},9330:function(a,t,e){"use strict";e("ada7")},"9da3":function(a,t,e){a.exports=e.p+"static/img/verjiaquan.05a7b9e3.png"},a5dc:function(a,t,e){},ada7:function(a,t,e){},b848:function(a,t,e){a.exports=e.p+"static/img/vershidu.664740ea.png"},db85:function(a,t,e){},ed17:function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",{staticClass:"verticalWrap"},[n("div",{staticClass:"pageHead"},[n("pageHead")],1),n("div",{directives:[{name:"show",rawName:"v-show",value:1==a.nowPage,expression:"nowPage == 1"}]},[n("NowData",{attrs:{screenType:"ver"}}),n("AirSwitchVer"),n("TemChart",{attrs:{screenType:"ver",showPing:a.nowPage}}),n("LastMonthData",{attrs:{screenType:"ver"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:2==a.nowPage,expression:"nowPage == 2"}]},[n("FloorSpace",{attrs:{showPing:a.nowPage},on:{donetowpage:a.doneTowPage}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:3==a.nowPage,expression:"nowPage == 3"}]},[n("div",{staticClass:"lastTotalEnergy verticalClass"},[a._m(0),n("div",{staticClass:"subhead-title"},[a._v("低能耗亲自然")]),n("div",{staticClass:"bottomCont"},[n("img",{attrs:{src:e("6650")}}),n("div",{staticClass:"showData"},[n("div",{staticClass:"title"},[a._v("比基准能耗")]),n("div",{staticClass:"energySave"},[a._v(" 节能"),n("span",[a._v(a._s(a.lastAllEnergy.energyCompare)+"%")])]),n("div",{staticClass:"totalEnergy"},[a._v(" 总能耗"),n("span",[a._v(a._s(a.lastAllEnergy.energyTotal))]),a._v("KWh ")])])])]),n("lastSaveEnergy",{attrs:{screenType:"ver"}}),n("lastEnergyChart",{attrs:{screenType:"ver",showPing:a.nowPage},on:{donethreepage:a.doneThreePage}})],1)])},s=[function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"head-title"},[e("span",[a._v("上月总能耗")])])}],i=e("5530"),o=(e("a9e3"),e("b680"),e("031b")),r=e("6c53"),c=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"airSwitch verticalClass"},[e("div",{staticClass:"air-title head-title"},[e("span",[a._v("空调实时开关")]),e("span",{staticClass:"status",class:{close:!a.airStatus}},[a._v(" "+a._s(a.airStatus?"空调已开启":"空调已关闭"))])]),e("div",{staticClass:"air-cont"},[e("div",{staticClass:"air-left"},[e("div",{staticClass:"bar-box"},[e("div",{staticClass:"bar",style:{width:a.airValue+"%"}})]),e("div",{staticClass:"air-rate"},[e("span",[a._v("空调开启率")]),e("span",{staticClass:"air-rate-value"},[a._v(a._s(a.airValue)+"%")])])]),e("div",{staticClass:"air-bg"},[e("img",{attrs:{src:[a.airStatus?a.img.openImg:a.img.closeImg]}})])])])},l=[],d=e("64f6"),u=e.n(d),m=e("2505"),v=e.n(m),g=e("2f62"),p={name:"AirSwitch",props:{status:{type:Boolean,default:function(){return!1}},value:{type:Number,default:function(){return 75}}},computed:Object(i["a"])({},Object(g["c"])({airValue:function(a){var t=a.airCondition.openRate,e=t?Number((100*t).toFixed(0)):t;return e},airStatus:function(a){var t=a.airCondition.openRate,e=!!t;return e}})),data:function(){return{img:{openImg:v.a,closeImg:u.a}}}},f=p,h=(e("4f2b"),e("2877")),w=Object(h["a"])(f,c,l,!1,null,"6978d0b1",null),P=w.exports,C=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("div",{staticClass:"topChange"},[e("div",{staticClass:"allIndicator"},a._l(a.allIndicator,(function(t,n){return e("div",{staticClass:"eachItem",class:{select:t.id==a.selIndicator.id},on:{click:function(t){return a.clickIndicator(n)}}},[e("span",[a._v(a._s(t.name))]),e("span",{staticClass:"bar"})])})),0),e("div",{staticClass:"imageDiv"},[e("img",{attrs:{src:a.selIndicator.img}})]),e("div",{staticClass:"textCont"},[a._v(" 平均"),e("span",[a._v(a._s(a.selIndicator.name))]),e("span",{staticClass:"value"},[a._v(a._s(a.totalAvgValues))]),e("span",[a._v(" "+a._s(a.selIndicator.unit)+" ")])])]),e("div",{staticClass:"floorWrap"},a._l(a.showFloors,(function(t,n){return e("div",{key:n,staticClass:"floor-item"},[e("div",{staticClass:"floor-num"},[e("span",[a._v(a._s(t.localName))])]),e("div",{staticClass:"floor-space"},a._l(t.dataSpaces,(function(n,s){return e("div",{key:s,staticClass:"space-box",style:{width:t.spacewidth+"%"}},[e("div",{staticClass:"space-name",style:{backgroundColor:a.selectColor(n.avgValues,a.selIndicatorId,!0)}},[a._v(" "+a._s(n.localName)+" ")])])})),0)])})),0)])},I=[],b=(e("4de4"),e("fb6a"),e("d81d"),e("99af"),e("c7cd"),e("159b"),e("b0c0"),e("c1df")),_=e.n(b),y=e("5e54"),x={name:"FloorSpace",data:function(){return{selIndicator:{},selIndicatorId:"",nowIndicatorIndex:null,allIndicator:[{id:"temp",name:"温度",img:e("4c17"),unit:"℃",code:"Tdb",fixed:1},{id:"humidity",code:"RH",name:"湿度",img:e("b848"),unit:"%",fixed:0},{id:"co2",code:"CO2",name:"CO₂",img:e("55c3"),unit:"ppm",fixed:0},{id:"methanal",code:"HCHO",name:"甲醛",img:e("9da3"),unit:"mg/m³",fixed:2},{id:"pm25",code:"PM2d5",name:"PM2.5",img:e("3259"),unit:"ug/m³",fixed:0}],allFloor:[],firstPageParams:[],secondPageParams:[],nowPage:1,pageNum:0,showFloors:[],totalAvgValues:null}},props:{showPing:{type:Number,default:function(){return 0}}},watch:{showPing:function(a,t){2==a&&(this.nowPage=1,this.queryFs())}},mounted:function(){},methods:{selectColor:y["a"],clickIndicator:function(a){this.nowIndicatorIndex=a},getTimeFloorParam:function(){var a=this,t=1==this.nowPage?this.firstPageParams:this.secondPageParams,e=this;this.queryParam(t).then((function(){var t=setTimeout((function(){if(e.nowIndicatorIndex=e.nowIndicatorIndex+1,5==e.nowIndicatorIndex){if(e.pageNum==e.nowPage)return e.nowIndicatorIndex=0,e.$emit("donetowpage"),void clearTimeout(t);2==e.pageNum&&1==e.nowPage&&(e.nowPage=2,e.nowIndicatorIndex=0)}a.getTimeFloorParam()}),2e3)}))},queryFs:function(){var a=this;this.$axios.post(this.$api.queryFs,{criteria:{projectId:"Pj1101020002"},size:14,page:1,orders:[{column:"floorSequenceId",asc:!0}]}).then((function(t){var e=t.data.content||[];e=e.filter((function(a){return a.spaceNum>0})),a.allFloor=e;var n,s,i=e.length;i<=7?(n=i,s=0,a.pageNum=1):(n=Math.ceil(i/2),s=Math.floor(i/2),a.pageNum=2);var o=a.floorHandle(n),r=a.floorHandle(s),c=e.slice(0,n),l=e.slice(n);a.firstPageParams=c.map((function(a){var t={};return t.id=a.id,t.projectId="Pj1101020002",t.spaceNum=o,t})),a.secondPageParams=l.map((function(a){var t={};return t.id=a.id,t.projectId="Pj1101020002",t.spaceNum=r,t})),a.nowIndicatorIndex=0,a.getTimeFloorParam()})).catch((function(a){}))},queryParam:function(a){var t=this,e=_()(),n=_()().subtract(30,"minutes"),s=n.format("YYYYMMDDHHmmss"),i=e.format("YYYYMMDDHHmmss"),o=this.nowIndicatorIndex;this.selIndicator=this.allIndicator[o];var r=this.selIndicator.code;return this.$axios.post("".concat(this.$api.queryParam,"?endTime=").concat(i,"&startTime=").concat(s,"&param=").concat(r),a).then((function(a){var e=a.data.data.floors||[];t.totalAvgValues=a.data.data.avgValues||null,t.totalAvgValues&&(t.totalAvgValues=t.totalAvgValues.toFixed(t.selIndicator.fixed)),e.forEach((function(a){var e=t.allFloor.filter((function(t){return t.id==a.id})),n=e[0]||{};a.name=n.name,a.localId=n.localId,a.localName=n.localName;var s=(a.dataSpaces||[]).length,i=t.spaceHandle(s);a.spacewidth=100/i})),t.showFloors=e,t.selIndicatorId=t.selIndicator.id}))},floorHandle:function(a){var t=1;switch(a){case 1:t=160;break;case 2:t=80;break;case 3:t=50;break;case 4:t=30;break;case 5:case 6:case 7:t=20;break}return t},spaceHandle:function(a){var t=a,e=Math.ceil(a/10);return t=Math.ceil(a/e),t}}},N=x,S=(e("004a"),Object(h["a"])(N,C,I,!1,null,"e442e78a",null)),T=S.exports,F=e("6c6f"),E=e("b3e6"),H=e("3156"),j=e("3cda"),k={components:{NowData:o["a"],FloorSpace:T,LastMonthData:r["a"],AirSwitchVer:P,TemChart:F["a"],lastEnergyChart:E["a"],lastSaveEnergy:H["a"],pageHead:j["a"]},data:function(){return{nowPage:null,verticalInterval:null}},mounted:function(){this.nowPage=1,this.timePageShow()},destroyed:function(){clearInterval(this.verticalInterval)},computed:Object(i["a"])({},Object(g["c"])({lastAllEnergy:function(a){var t=JSON.parse(JSON.stringify(a.lastAllEnergy));return t.energyCompare=Number((100*t.energyCompare).toFixed(0)),t}})),methods:{doneThreePage:function(){this.nowPage=1,this.timePageShow()},doneTowPage:function(){this.nowPage=3},timePageShow:function(){var a=this;setTimeout((function(){a.nowPage=a.nowPage+1,4==a.nowPage&&(a.nowPage=1)}),6e3)}}},A=k,V=(e("9330"),Object(h["a"])(A,n,s,!1,null,"6c784921",null));t["default"]=V.exports}}]);